(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{303:function(t,e,n){},310:function(t,e,n){"use strict";n.r(e);var a=n(16),i=n(10),r=n(11),o=n(14),s=n(12),c=n(13),l=n(17),u=n(0),d=n.n(u),h=n(305),p=n(295),f=n(308),O=n(307),m=n(301),b=n.n(m),v=n(306),y=function(t){function e(){var t;return Object(i.a)(this,e),(t=Object(o.a)(this,Object(s.a)(e).call(this))).clickHandler=t.clickHandler.bind(Object(l.a)(Object(l.a)(t))),t.doubleClickHandler=t.doubleClickHandler.bind(Object(l.a)(Object(l.a)(t))),t.mouseOverHandler=t.mouseOverHandler.bind(Object(l.a)(Object(l.a)(t))),t.mouseOutHandler=t.mouseOutHandler.bind(Object(l.a)(Object(l.a)(t))),t.clickTimeout=null,t}return Object(c.a)(e,t),Object(r.a)(e,[{key:"clickHandler",value:function(){this.props.onClick({type:"NODE",data:this.props.id})}},{key:"doubleClickHandler",value:function(){this.props.onDoubleClick&&this.props.onDoubleClick({type:"NODE",data:this.props.id})}},{key:"mouseOverHandler",value:function(t,e){this.props.onMouseOver&&this.props.onMouseOver({type:"NODE",data:{id:this.props.id,text:this.props.text,type:this.props.type},event:t})}},{key:"mouseOutHandler",value:function(t){this.props.onMouseOut&&this.props.onMouseOut({type:"NODE",data:{id:this.props.id,text:this.props.text,type:this.props.type},event:t})}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.radius,a=t.color,i=t.x,r=t.y,o=t.style,s=t.active;return d.a.createElement("g",{className:e,transform:"translate(".concat(i,",").concat(r,")"),onClick:this.clickHandler,style:{cursor:"pointer",opacity:s?1:.1},onMouseOver:this.mouseOverHandler,onMouseOut:this.mouseOutHandler},d.a.createElement("circle",{r:n,fill:a,style:o}),k(this.props))}}]),e}(u.Component),k=function(t){var e=t.id,n=t.img,a=t.radius,i=t.shortText,r=t.textStyle;return n?d.a.createElement("g",null,d.a.createElement("defs",null,d.a.createElement("clipPath",{id:"clip_".concat(e)},d.a.createElement("circle",{r:a-1}))),d.a.createElement("image",{xlinkHref:n,clipPath:"url(#clip_".concat(e,")"),x:-a,y:-a,width:2*a})):d.a.createElement("text",{dx:-a/2,dy:r.fontSize/2,style:r},i)};y.defaultProps={className:"node",radius:35,color:"#FFFFFF",style:{r:35,stroke:"#375E97",strokeWidth:"3px"},textStyle:{fontSize:15,fill:"#fff",strokeWidth:"3px",fontWeight:"normal"},x:0,y:0,active:!0};var g=y,j=function(t){function e(){return Object(i.a)(this,e),Object(o.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(c.a)(e,t),Object(r.a)(e,[{key:"render",value:function(){var t=this.props,e=t.d,n=t.pointer,a=t.style,i=t.id,r=t.active;return d.a.createElement("g",{style:{opacity:r?1:.1}},x(this.props),d.a.createElement("path",{id:i,style:a,d:e,markerEnd:n?"url(#".concat(i,"_pointer)"):n}),S(this.props))}}]),e}(u.Component),x=function(t){if(t.pointer)return d.a.createElement("defs",null,d.a.createElement("marker",{id:"".concat(t.id,"_pointer"),viewBox:"0 -5 10 10",refX:t.arrowOffset,refY:"-2",markerWidth:"6",markerHeight:"6",orient:"auto"},d.a.createElement("path",{d:"M0,-5L10,0L0,5",fill:"#666",style:{opacity:1}})))},S=function(t){if(t.type)return d.a.createElement("text",null,d.a.createElement("textPath",{dx:0,dy:5,href:"#".concat(t.id),startOffset:"50%",style:t.textStyle},t.type))};j.defaultProps={style:{strokeWidth:1.5,fill:"none",stroke:"gba(50, 50, 50, 0.2)"},textStyle:{pointerEvents:"none",textAnchor:"middle",fill:"#333"},pointer:!0,active:!0};var E=j,N=function(t){function e(t){var n;return Object(i.a)(this,e),(n=Object(o.a)(this,Object(s.a)(e).call(this,t))).state=Object(a.a)({},n.props),n.getArcPath=n.getArcPath.bind(Object(l.a)(Object(l.a)(n))),n.getLinks=n.getLinks.bind(Object(l.a)(Object(l.a)(n))),n}return Object(c.a)(e,t),Object(r.a)(e,[{key:"componentWillReceiveProps",value:function(t){this.setState(Object(a.a)({},t))}},{key:"getLinks",value:function(t,e){return this.state.links.filter(function(n){return n.source.id===t.id&&n.target.id===e.id}).map(function(t){return t.type})}},{key:"getArcPath",value:function(t){var e,n,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=a?t.source.x:t.target.x,r=a?t.source.y:t.target.y,o=a?t.target.x:t.source.x,s=a?t.target.y:t.source.y,c=o-i,l=s-r,u=this.getLinks(t.source,t.target),d=Object(v.a)().domain(u).range([1,2])(t.type);1===d?(n=1,e=1):d%2===0?(n=0,e=d/2):d%3===0&&(n=1,e=d/3+1);var h=Math.sqrt(c*c+l*l)/(1+.5*(e-1));return"M".concat(i,",").concat(r,"A").concat(1.7*h,",").concat(1.7*h," ").concat(0,", ").concat(0,", ").concat(n," ").concat(o,",").concat(s)}},{key:"render",value:function(){var t=this,e=this.state,n=e.nodes,a=e.links;return d.a.createElement("g",{className:this.props.className,transform:this.props.transform},d.a.createElement("g",{className:"links"},a.reduce(function(e,n,a){return"object"===typeof n.source&&"object"===typeof n.target?(e.push(d.a.createElement(E,{key:a,d:t.getArcPath(n),style:n.style,id:n.id,type:n.type,arrowOffset:1.45*n.target.radius,active:n.active})),e):e},[])),d.a.createElement("g",{className:"nodes"},n.map(function(e,n){return d.a.createElement(g,Object.assign({key:n,onClick:t.props.onClick,onDoubleClick:t.props.onDoubleClick,onMouseOver:t.props.onMouseOver,onMouseOut:t.props.onMouseOut},e))})))}}]),e}(u.Component);N.defaultProps={className:"universe",nodes:[],links:[]};var H=N,D=(n(303),function(t){function e(t){var n;return Object(i.a)(this,e),(n=Object(o.a)(this,Object(s.a)(e).call(this,t))).state={nodes:[],links:[],selectedNode:null,activeNodes:[],simulation:n.initSimulation(),width:100,height:100,transform:{x:0,y:0,k:1},tooltip:{text:"",style:{opacity:0,top:0,left:0}}},n.initSimulation=n.initSimulation.bind(Object(l.a)(Object(l.a)(n))),n.initZoomHandler=n.initZoomHandler.bind(Object(l.a)(Object(l.a)(n))),n.updateData=n.updateData.bind(Object(l.a)(Object(l.a)(n))),n.updateSimulation=n.updateSimulation.bind(Object(l.a)(Object(l.a)(n))),n.onTick=n.onTick.bind(Object(l.a)(Object(l.a)(n))),n.svg=d.a.createRef(),n.nodes=[],n.links=[],n.interval=1e3/n.props.fps,n.millis=Date.now(),n.mouseOverHandler=n.mouseOverHandler.bind(Object(l.a)(Object(l.a)(n))),n.mouseOutHandler=n.mouseOutHandler.bind(Object(l.a)(Object(l.a)(n))),n.clickHandler=n.clickHandler.bind(Object(l.a)(Object(l.a)(n))),n.getNeighborNodes=n.getNeighborNodes.bind(Object(l.a)(Object(l.a)(n))),n}return Object(c.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.initZoomHandler(),this.setState({width:this.svg.current.clientWidth,height:this.svg.current.clientHeight},function(){var e=C(t.nodes,t.props.nodes);t.updateData(e),t.updateSimulation()})}},{key:"componentDidUpdate",value:function(t){this.interval=1e3/this.props.fps;var e=C(t.nodes,this.props.nodes);(e.added.length>0||e.removed.length>0)&&(this.updateData(e),this.updateSimulation()),JSON.stringify(Object(a.a)({},t,{nodes:null,links:null,children:null}))!==JSON.stringify(Object(a.a)({},this.props,{nodes:null,links:null,children:null}))&&this.updateSimulation()}},{key:"initSimulation",value:function(){var t=Object(f.c)().id(function(t){return t.id}).strength(function(t){return t.strength}).distance(function(t){return t.distance});return Object(f.e)().force("link",t)}},{key:"initZoomHandler",value:function(){var t=this,e=Object(p.f)(".svgGraph"),n=Object(O.a)().on("zoom",function(){t.setState({transform:p.b.transform})});e.call(n).on("dblclick.zoom",null)}},{key:"updateData",value:function(t){var e=this,n=this.props.links;this.links=[],t.removed.forEach(function(t){e.nodes=e.nodes.filter(function(e){return!(e.id===t.id&&e.type===t.type)})}),t.added.forEach(function(t){return e.nodes.push(t)}),n.forEach(function(t){var n=e.nodes.filter(function(e){return e.id===t.source})[0],i=e.nodes.filter(function(e){return e.id===t.target})[0];n&&i&&e.links.push(Object(a.a)({},t,{source:n,target:i}))})}},{key:"updateSimulation",value:function(){var t=this,e=this.props,n=e.attraceForceStrength,a=e.chargeStrength,i=e.collisionRadiusOffset,r=e.collisionStrength,o=e.animation,s=e.velocityDecay,c=e.alphaStart,l=e.cluster,u=e.clusterRadiusScale,d=e.clusterForceStrength,h=this.state,p=h.simulation,O=h.height,m=h.width;if(p.nodes(this.nodes).on("tick",this.onTick),p.force("link").links(this.links),p.force("center",Object(f.a)(m/2,O/2)).force("attraceForce",Object(f.d)().strength(n)).force("charge",Object(f.d)().strength(a)).force("collision",Object(f.b)().radius(function(t){return t.radius+i}).strength(r)),l){var v={};b()(this.nodes,"type").map(function(t){return t.type}).forEach(function(t,e,n){if(!v[t]){var a=m>O?O*u:m*u;v[t]={x:Math.cos((e+1)/n.length*2*Math.PI)*a+m/2+Math.random(),y:Math.sin((e+1)/n.length*2*Math.PI)*a+O/2+Math.random(),radius:a}}}),p.force("cluster",function(e){return M(e,t.nodes,v,d)})}else p.force("cluster",null);if(p.alpha(c).alphaTarget(0).velocityDecay(s).restart(),!o)for(;p.alpha()>=.02;)p.tick()}},{key:"onTick",value:function(t){var e=Date.now();e-this.millis>this.interval&&(this.millis=e,this.setState({nodes:this.nodes,links:this.links}))}},{key:"mouseOutHandler",value:function(){this.setState({tooltip:{style:{opacity:0}}})}},{key:"mouseOverHandler",value:function(t){var e=t.event,n=t.type,a=t.data,i="";"NODE"===n?i="[".concat(a.type,"] ").concat(a.text):"LINK"===n&&(i="".concat(a.type)),this.setState({tooltip:{text:i,style:{opacity:1,top:e.clientY+15,left:e.clientX+15}}})}},{key:"clickHandler",value:function(t){this.state.selectedNode===t.data?this.setState({selectedNode:null,activeNodes:[]}):this.setState({selectedNode:t.data,activeNodes:this.getNeighborNodes(t.data)})}},{key:"getNeighborNodes",value:function(t){return this.links.reduce(function(e,n){return n.target.id===t?e.push(n.source.id):n.source.id===t&&e.push(n.target.id),e},[])}},{key:"render",value:function(){var t=this.state,e=t.transform,n=t.tooltip,i=t.selectedNode,r=t.activeNodes,o=this.state.nodes.map(function(t){return Object(a.a)({},t,{active:null===i||t.id===i||r.indexOf(t.id)>-1})}),s=this.state.links.map(function(t){return Object(a.a)({},t,{active:null===i||t.source.id===i||t.target.id===i})});return d.a.createElement("div",{className:"networkGraph",style:{width:"100%",height:"100%"}},this.props.children,d.a.createElement("svg",{className:"svgGraph",width:"100%",height:"100%",ref:this.svg},d.a.createElement(H,{nodes:o,links:s,transform:"translate(".concat(e.x,",").concat(e.y,") scale(").concat(e.k,")"),onClick:this.clickHandler,onDoubleClick:this.props.onDoubleClick,onMouseOver:this.mouseOverHandler,onMouseOut:this.mouseOutHandler})),d.a.createElement("span",{className:"networkGrapTooltip",style:n.style},n.text))}}]),e}(u.Component)),M=function(t,e,n,a){e.forEach(function(e){var i=n[e.type];if(i.x!==e.x&&i.y!==e.y){var r=t*a;e.vx-=(e.x-i.x)*r,e.vy-=(e.y-i.y)*r}})},w=Object(h.a)(function(t,e){return e.reduce(function(e,n){return n.id===t.id&&e.push(n),e},[]).length>0?1:0}),C=Object(h.a)(function(t,e){return{removed:t.filter(function(t){return 0===w(t,e)}),added:e.filter(function(e){return 0===w(e,t)})}});D.defaultProps={nodes:[],links:[],attraceForceStrength:10,chargeStrength:-10,collisionRadiusOffset:15,collisionStrength:.5,animation:!0,cluster:!1,fps:60,alphaStart:1,velocityDecay:.4,clusterRadiusScale:2,clusterForceStrength:.3};e.default=D}}]);
//# sourceMappingURL=2.3d0f787e.chunk.js.map